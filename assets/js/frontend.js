(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{10:function(e,t,i){},55:function(e,t,i){"use strict";var s=i(8);i.n(s).a},56:function(e,t,i){"use strict";var s=i(9);i.n(s).a},57:function(e,t,i){"use strict";var s=i(10);i.n(s).a},77:function(e,t,i){"use strict";i.r(t);var s=i(3),n=i(6),a=i.n(n);const r=(window.crep?window.crep.rest_url:"http://127.0.0.1:8000/wp-json/")+"crep/v1/";async function o(e){return await l({method:"get",url:`${r}events/${e}`})}async function l(e){try{return(await a()(e)).data}catch(e){return console.error(e),{error:"Bei der Verbindung zum Server ist ein Fehler aufgetreten! Stelle sicher, dass du als Admin eingeloggt bist und versuche es noch einmal."}}}a.a.defaults.headers.common["X-WP-Nonce"]=window.crep?window.crep.nonce:null;var c={name:"SeminarList",props:{eventId:{type:Number,required:!0}},data:()=>({event:{},seminars:[],session_map:{},speaker_map:{},tag_map:{}}),async created(){this.event=await o(this.eventId),this.seminars=await async function(e){return(await l({method:"get",url:r+"seminars",params:{event_id:e}})).map(e=>({...e,id:parseInt(e.id),event_id:parseInt(e.event_id)}))}(this.eventId),this.seminars.sort(this.compareSeminarByNumber),this.event.sessions.forEach(e=>{this.session_map[e.id]=e.name}),this.event.speakers.forEach(e=>{this.speaker_map[e.id]=e}),this.event.tags.forEach(e=>{this.tag_map[e.id]=e.name})},methods:{getSessions(e){let t="";return e.forEach(e=>{t+=this.session_map[e]+" | "}),t.slice(0,-3)},getSpeakers(e){let t="";return e.forEach(e=>{const i=this.speaker_map[e];t+=`${i.first_name} ${i.surname}, ${i.location} & `}),t.slice(0,-3)},compareSeminarByNumber(e,t){let i=parseInt(e.number),s=parseInt(t.number);return i<s?-1:i>s?1:0}}},m=(i(55),i(0)),d=Object(m.a)(c,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"crep-seminar-list"}},e._l(e.seminars,(function(t){return i("div",{key:t.id,staticClass:"crep-seminar"},[t.number?i("div",{staticClass:"crep-seminar__number"},[e._v("\n      "+e._s(t.number.padStart(2,"0"))+"\n    ")]):e._e(),e._v(" "),i("div",[i("h4",{staticClass:"crep-seminar__name"},[e._v(e._s(t.name))]),e._v(" "),i("small",{staticClass:"crep-seminar__sessions"},[e._v(e._s(e.getSessions(t.session_ids)))]),e._v(" "),i("p",{staticClass:"crep-seminar__description"},[e._v(e._s(t.description))]),e._v(" "),i("small",{staticClass:"crep-seminar__speakers"},[e._v(e._s(e.getSpeakers(t.speaker_ids)))]),e._v(" "),t.tag_ids.length?i("ul",{staticClass:"crep-seminar__tags"},e._l(t.tag_ids,(function(t){return i("li",{key:t,staticClass:"crep-seminar__tag"},[e._v("\n          "+e._s(e.tag_map[t])+"\n        ")])})),0):e._e()])])})),0)}),[],!1,null,"621f0731",null).exports;function u(){const e={summand:_(1,21),addend:_(1,21)};return{...e,sum:e.summand+e.addend}}function _(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)}var p=i(5),h=i.n(p),g=(i(25),{name:"RegistrationForm",components:{Multiselect:h.a},props:{eventId:{type:Number,required:!0},redirectUrl:{type:String,required:!0}},data(){return{newRegistration:{first_name:"",surname:"",contact_mail:"",event_id:this.eventId,additional_params_object:{},consent:!1,result:""},event:{sessions:[],seminars:[]},seminar_map:{},seminarSelections:[],additionalParamFields:[],equation:u(),requiredFields:["Vorname","Nachname","E-Mail-Adresse"]}},async created(){this.event=await o(this.eventId),this.event.seminars.forEach(e=>{this.seminar_map[e.id]=e.name}),this.event.sessions.forEach(e=>{const t={label:e.name,id:e.id,value:{},options:[]};e.seminar_ids.forEach(e=>{t.options.push({code:e,name:this.seminar_map[e]})}),this.seminarSelections.push(t)}),this.additionalParamFields=function(e){let t=[];try{t=JSON.parse(e),Array.isArray(t)||(console.error("Input to parseJSONStringArray was not parsed into array correctly!"),t=[])}catch(e){console.error(e)}return t}(this.event.additional_params),this.additionalParamFields.forEach(e=>{Object.keys(this.newRegistration.additional_params_object).includes(e.code)||(this.newRegistration.additional_params_object[e.code]=""),e.required&&this.requiredFields.push(e.name)})},methods:{async submit(e){e.preventDefault();if(this.additionalParamFields.filter(e=>e.required&&!this.newRegistration.additional_params_object[e.code]).length||!this.newRegistration.first_name||!this.newRegistration.surname||!this.newRegistration.contact_mail)return void alert("Die Felder:\n\n"+this.requiredFields.join(", ")+"\n\nsind Pflichtfelder und müssen angegeben werden!");if(!this.newRegistration.consent)return void alert("Bitte bestätige den Hinweis zum Datenschutz, um dich anzumelden!");if(""===this.newRegistration.result||parseInt(this.newRegistration.result)!==this.equation.sum)return void alert("Bitte gib die korrekte Summe an, um zu bestätigen, dass du kein Roboter bist.");this.newRegistration.seminars=[],this.seminarSelections.forEach(e=>{e.value&&e.value.code&&this.newRegistration.seminars.push({session_id:e.id,seminar_id:e.value.code})}),this.newRegistration.additional_params=JSON.stringify(this.newRegistration.additional_params_object),this.newRegistration.confirmed=0,this.newRegistration.number_one=this.equation.summand,this.newRegistration.number_two=this.equation.addend;const t=await async function(e){return await l({method:"post",url:r+"registrations/validate",data:e})}(this.newRegistration);alert(t.success?"Deine Anmeldung wurde versandt. Du erhälst bald eine Bestätigungsmail. Vielen Dank!":"Beim Senden ist ein Fehler aufgetreten:\n\n"+(t.error||"Unbekannter Fehler")),t.success&&(window.location.href=this.redirectUrl)}}}),v=(i(56),i(57),Object(m.a)(g,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("form",{staticClass:"registration-form",on:{submit:e.submit}},[i("h4",{staticClass:"registration-form__headline"},[e._v("Persönliche Daten:")]),e._v(" "),i("fieldset",{staticClass:"registration-form__set"},[e._m(0),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.newRegistration.first_name,expression:"newRegistration.first_name"}],staticClass:"registration-form__block",attrs:{type:"text",id:"crep-first-name",required:""},domProps:{value:e.newRegistration.first_name},on:{input:function(t){t.target.composing||e.$set(e.newRegistration,"first_name",t.target.value)}}}),e._v(" "),e._m(1),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.newRegistration.surname,expression:"newRegistration.surname"}],staticClass:"registration-form__block",attrs:{type:"text",id:"crep-surname",required:""},domProps:{value:e.newRegistration.surname},on:{input:function(t){t.target.composing||e.$set(e.newRegistration,"surname",t.target.value)}}}),e._v(" "),e._m(2),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.newRegistration.contact_mail,expression:"newRegistration.contact_mail"}],staticClass:"registration-form__block",attrs:{type:"email",id:"crep-contact_mail",required:""},domProps:{value:e.newRegistration.contact_mail},on:{input:function(t){t.target.composing||e.$set(e.newRegistration,"contact_mail",t.target.value)}}})]),e._v(" "),i("h4",{staticClass:"registration-form__headline"},[e._v("Seminare auswählen:")]),e._v(" "),i("fieldset",{staticClass:"registration-form__set"},[e._l(e.seminarSelections,(function(t){return[i("label",{key:"label_"+t.id,staticClass:"registration-form__block registration-form__label",attrs:{for:"seminar_"+t.id}},[e._v(e._s(t.label))]),e._v(" "),i("multiselect",{key:t.id,staticClass:"edit-registration-form__fullwidth-field",attrs:{id:"seminar_"+t.id,placeholder:"Suche nach einem Seminar",selectLabel:"Enter oder Anklicken zum Auswählen",label:"name","track-by":"code",options:t.options},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"session.value"}},[i("template",{slot:"noOptions"},[e._v("Keine Einträge.")])],2)]}))],2),e._v(" "),[i("h4",{staticClass:"registration-form__headline"},[e._v("Sonstiges")]),e._v(" "),i("fieldset",{staticClass:"registration-form__set"},[e._l(e.additionalParamFields,(function(t){return[i("label",{key:"label_"+t.code,staticClass:"registration-form__block registration-form__label",attrs:{for:t.code}},[e._v(e._s(t.name)+"\n          "),t.required?i("em",[e._v(" (Pflichtfeld)")]):e._e()]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.newRegistration.additional_params_object[t.code],expression:"newRegistration.additional_params_object[param.code]"}],key:t.code,staticClass:"registration-form__block",attrs:{required:t.required,type:"text"},domProps:{value:e.newRegistration.additional_params_object[t.code]},on:{input:function(i){i.target.composing||e.$set(e.newRegistration.additional_params_object,t.code,i.target.value)}}})]})),e._v(" "),i("div",{staticClass:"registration-form__label"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.newRegistration.consent,expression:"newRegistration.consent"}],attrs:{type:"checkbox",id:"crep_consent",required:""},domProps:{checked:Array.isArray(e.newRegistration.consent)?e._i(e.newRegistration.consent,null)>-1:e.newRegistration.consent},on:{change:function(t){var i=e.newRegistration.consent,s=t.target,n=!!s.checked;if(Array.isArray(i)){var a=e._i(i,null);s.checked?a<0&&e.$set(e.newRegistration,"consent",i.concat([null])):a>-1&&e.$set(e.newRegistration,"consent",i.slice(0,a).concat(i.slice(a+1)))}else e.$set(e.newRegistration,"consent",n)}}}),e._v(" "),e._m(3)]),e._v(" "),i("div",{staticClass:"registration-form__label"},[i("span",{staticClass:"registration-form__equation"},[e._v(e._s(e.equation.summand)+"  +  "+e._s(e.equation.addend)+"  = ")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.newRegistration.result,expression:"newRegistration.result"}],staticClass:"registration-form__number",attrs:{type:"text",required:""},domProps:{value:e.newRegistration.result},on:{input:function(t){t.target.composing||e.$set(e.newRegistration,"result",t.target.value)}}}),i("em",[e._v(" (Pflichtfeld)")])])],2)],e._v(" "),i("button",{staticClass:"button button-primary",attrs:{type:"submit"}},[e._v("Anmelden")])],2)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("label",{staticClass:"registration-form__block registration-form__label",attrs:{for:"crep-first-name"}},[this._v("Vorname:"),t("em",[this._v(" (Pflichtfeld)")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{staticClass:"registration-form__block registration-form__label",attrs:{for:"crep-surname"}},[this._v("Nachname:"),t("em",[this._v(" (Pflichtfeld)")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{staticClass:"registration-form__block registration-form__label",attrs:{for:"crep-contact_mail"}},[this._v("E-Mail-Adresse:"),t("em",[this._v(" (Pflichtfeld)")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{staticClass:"registration-form__label registration-form__inline",attrs:{for:"crep_consent"}},[this._v("Mit der Nutzung dieses Formulars erkläre ich mich mit der\n          Speicherung und Verarbeitung meiner Daten durch diese Website\n          einverstanden."),t("em",[this._v(" (Pflichtfeld)")])])}],!1,null,"8d8f5164",null).exports);s.a.config.productionTip=!1;const f=document.getElementById("crep-seminar-list");f&&new s.a({el:"#crep-seminar-list",render:e=>e(d,{props:{eventId:parseInt(f.dataset.eventId)}})});const w=document.getElementById("crep-registration-form");w&&new s.a({el:"#crep-registration-form",render:e=>e(v,{props:{eventId:parseInt(w.dataset.eventId),redirectUrl:w.dataset.redirectUrl}})})},8:function(e,t,i){},9:function(e,t,i){}},[[77,0,1]]]);